<div>
    <ul class="breadcrumb">
        <li>
            <a ui-sref="panel">Inicio</a>
        </li>
        <li>
            <a ui-sref="panel.auditorias" >Auditorias</a>
        </li>
    </ul>
</div>

<div class="row">
    <div class="box col-md-12">
        <div class="box-inner">
            <div class="box-header well">
                <h2><i class="glyphicon glyphicon-info-sign"></i> Auditorias</h2>

                <div class="box-icon">
                    <!--
                    <a href="#" class="btn btn-close btn-round btn-default"><i
                            class="glyphicon glyphicon-remove"></i></a>
                    -->
                </div>
            </div>
            <div class="box-content row">
                
              <div class="col-sm-12">

                <button  class="btn btn-primary" ng-show="!vermostrandocrarauditorias" ng-click="vercrearauditorias()">Crear</button>
                    
                    <div ng-show="vermostrandocrarauditorias" class="panel panel-warning" style="margin-bottom: 50px">

                            <div class="box-header well">
                        <h2>
                          <i class="glyphicon glyphicon-plus"></i> Nueva Auditoria
                        </h2>
                      
                        <div class="box-icon"></div>
                      </div>
                      
                      <!--
                        <div class="panel-heading">Ingrese  los datos de Auditorias en los campos correspodientes</div>-->

                         <form ng-submit="InsertEntidadAuditoria(auditoria_crear)">

                          <div class="row">

                              <div class="form-group col-sm-6"> <label>Fecha</label>
                                    <input  required="required" required="required" type="date" class="form-control"  placeholder="Fecha " ng-model="auditoria_crear.fecha">
                              </div>
                          <div class="form-group col-sm-6"> <label>Hora</label>
                            <input required="required" type="time"  class="form-control" placeholder="Hora" ng-model="auditoria_crear.hora">
                          </div>
                            
                          </div>

                          
                          <div>  <label>Iglesia</label>
                            
                                          <ui-select ng-model="auditoria_crear.iglesia" style="width: 100%;" theme="bootstrap">
                                            <ui-select-match placeholder="Iglesia">
                                              <span ng-bind="$select.selected.nombres + ' ' + $select.selected.alias"></span>
                                            </ui-select-match>
                                            <ui-select-choices group-by="agruparPorDistrito" repeat="item in iglesias |  filter: $select.search track by $index">
                                             <span ng-bind-html="item.nombres + ' ' + item.alias | highlight: $select.search"></span>
                                            </ui-select-choices>
                                          </ui-select>
                            </div>


                           <div class="center">
                        <input class="btn btn-warning " type="button" ng-click="cancelar_crear_distrito()" value="Cancelar">
                        <input class="btn btn-primary " type="submit" name="" value="Crear Auditoria">
                                                 
                          </div>
                         
                   
                                                                      

                            
                          
                        </form>
                 </div>



                   


                <table class="table">
                  <thead>


                    <tr >
                      <th scope="col">ID </th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Hora</th>
                      <th scope="col">Iglesia</th>
                      <th scope="col">Actual</th>


                    </tr>


                    <tr ng-repeat="auditoria in auditorias"  >
                      
                      <td >{{ $index + 1 }}</td>
                      <td >{{auditoria.fecha }}</td>
                      <td>{{auditoria.hora}}</td>
                      <td >{{auditoria.nombre +' ' + auditoria.alias}}</td>
                     
                      <td>
                        <div class="btn-group">                        
                          <button class="btn btn-primary btn-sm" ng-click="veractuauditoria(auditoria)">
                            <i class="glyphicon glyphicon-pencil "></i>
                          </button>

                          <button class="btn btn-danger btn-sm" ng-click="elimninaradutiroiar(auditoria)">
                            <i class="glyphicon glyphicon-remove "></i>
                          </button>
                          
                          <button ng-show="USER.auditoria_id!=auditoria.rowid" class="btn btn-default btn-sm" ng-click="seleccionarAuditoria(auditoria)">
                            <i class="glyphicon glyphicon-check "></i>
                            Seleccionar
                          </button>

                          <span ng-show="USER.auditoria_id==auditoria.rowid" style="padding-top: 5px; display: inline-block; color: #27a0e6;">Seleccionada</span>

                        </div>

                      </td>
                      
                    </tr>

                  </thead>
                  <tbody>
                    
                    
                  
                   
                  </tbody>
                </table>


                <div ng-show="modusers">
                    <h2>Modificar Auditoria</h2>
                    <form ng-submit="actusersauditoria(auditoria_editars)">

                      <table style="width: 100%;">
                        
                         <tr> 
                            <td >Fecha</td>
                            <td><input class="form-control" type="date" placeholder="Nombre" ng-model="auditoria_editars.fecha"></td>
                         </tr> 

                        <tr>
                          <td >Hora</td>
                          <td><input class="form-control col-lg-2" type="time" placeholder="apellidos" ng-model="auditoria_editars.hora"></td>
                        </tr>

                        <tr>
                          <td >Entidad</td>
                          <td> <select  class="form-control selcls"  ng-model="auditoria_editars.entidad">>
                                <optgroup  label="Entidad:"> <option ng-repeat="entidad in entidades" value="{{entidad.rowid}}" >{{entidad.nombres}} {{entidad.alias}}</option></optgroup>

                            </select></td>
                          <td></td>
                        </tr>
                      
                     </table>


                     

                     
                     
                      

                      <div>
                        <input class="btn btn-primary  btn-block" type="submit" name="" value="Actualizar Auditoria">
                      </div>
                      
                      
                      
                      
                    </form>
                  </div>
                            
                        
                </div>

            </div>
        </div>
    </div>
</div>

